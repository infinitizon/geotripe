<div class="panel">
    <div class="panel-body">
        <form name="form" role="form">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="po_no">Purchase Order Number <span ng-show="!ProcEdt.quote.po_no" class="text-danger">*</span></label>
                        <input type="text" id="po_no" data-ng-model="ProcEdt.quote.po_no" placeholder="Enter PO number" class="form-control" required="required" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="PartyId">Client <span data-ng-show="!ProcEdt.quote.party_party_id" class="text-danger">*</span></label>
                        <select id="PartyId" class="form-control"
                                data-ng-click="ProcEdt.getLOVs('Party','parties', {'response':'party_id&name', 'and':[{
                                                                                            'propertyName': 'party_partytype_id',
                                                                                            'propertyValue': 201607131,
                                                                                            'propertyDataType': 'BIGINT',
                                                                                            'operatorType': '='
                                                                                        }]})"
                                data-ng-options="party.party_id as party.name for party in ProcEdt.container['parties']"
                                data-ng-model="ProcEdt.quote.party_party_id"
                                data-ng-disabled="ProcEdt.disableClient">
                            <option value="">{{ProcEdt.quote.party_party_id || "--Select Company name --"}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="eventOwner">Name of Event Owner</label>
                        <input type="text" id="eventOwner" data-ng-model="ProcEdt.quote.eventowner" placeholder="--Select Name of Event Owner --" class="form-control" data-ng-disabled="true" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="publishDate">Publish Date <span ng-show="!ProcEdt.quote.publishdate" class="text-danger">*</span></label>
                        <p class="input-group">
                            <input type="text" id="publishDate" class="form-control"
                                   uib-datepicker-popup="dd-MMM-yyyy" ng-model="ProcEdt.quote.publishdate" is-open="ProcEdt.publishdate"
                                   ng-focus="ProcEdt.publishdate=true" placeholder="Publish Date (dd-MMM-YYYY) e.g 08-Aug-2016"
                                   ng-required="true" close-text="&times;" data-ng-disabled="true" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" data-ng-click="ProcEdt.publishdate = !ProcEdt.publishdate"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                        </p>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="dueDate">Due Date <span ng-show="!ProcEdt.quote.duedate" class="text-danger">*</span></label>
                        <p class="input-group">
                            <input type="text" id="dueDate" class="form-control" ng-model="ProcEdt.quote.duedate"
                                   uib-datepicker-popup="dd-MMM-yyyy" is-open="ProcEdt.dueDate" datepicker-options="{minDate: ProcEdt.quote.publishdate}"
                                   data-ng-focus="ProcEdt.dueDate=true" placeholder="Due Date (dd-MMM-YYYY) e.g 08-Aug-2016"
                                   ng-required="true" close-text="&times;" data-ng-disabled="true" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="ProcEdt.dueDate = !ProcEdt.dueDate"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="currency">Currency  <span ng-show="!ProcEdt.quote.quote_currency_id" class="text-danger">*</span></label>
                        <select id="currency" required
                                class="form-control"
                                data-ng-click="ProcEdt.getLOVs('Currency','currencies', {'response':'currency_Id&code'})"
                                data-ng-options="currencies.currency_Id as currencies.code for currencies in ProcEdt.container['currencies']"
                                data-ng-model="ProcEdt.quote.quote_currency_id" data-ng-disabled="true">
                            <option value="">{{ProcEdt.quote.quote_currency_id || "--Select Currency --"}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="userId">Assign to <span data-ng-show="!ProcEdt.quote.users_user_id" class="text-danger">*</span></label>
                        <select id="userId"
                                class="form-control"
                                data-ng-click="ProcEdt.getUsers(20161307)"
                                data-ng-options="user.user_id as user.name for user in ProcEdt.container['users']"
                                data-ng-model="ProcEdt.quote.users_user_id" data-ng-disabled="true">
                            <option value="">{{ProcEdt.quote.users_user_id || "--Select the in-house person to assign to--"}}</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-10 col-sm-offset-1" style="overflow-x: auto;">
                    <fieldset style="margin-top:25px;">
                        <legend>
                            <i class="fa fa-scissors text-primary" aria-hidden="true" title="Split PO numbers" style="cursor: pointer;"
                               ng-click="quotCtrl.open({'modalSize':'lg', 'url':'quoteItems', 'data':{'edit':(quotCtrl.quote.quote_id)?true:false}})">
                            </i>
                        </legend>
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <td><input type="checkbox" ng-change="ProcEdt.updateQuotes()" ng-model="ProcEdt.allQuotes"/></td>
                                <th>S/N</th><th>Part No./Model</th>
                                <th>Material Description</th><th>OEM Description</th><th>Qty</th><th>Manufacturers</th>
                                <th data-ng-if="ProcEdt.supervisor(ProcEdt.quote.quote_id)">UOM</th>
                                <th data-ng-if="ProcEdt.supervisor(ProcEdt.quote.quote_id)">Unit Price</th>
                                <th data-ng-if="ProcEdt.supervisor(ProcEdt.quote.quote_id)">Extended Price</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-if="ProcEdt.lineItems.length <= 0"><td colspan="{{ProcEdt.quote.quote_id?9:7}}" style="text-align:center;">{{ ProcEdt.lineItemsLoading || 'Loading new data!!' }}</td></tr>
                            <tr ng-repeat="lineItem in ProcEdt.lineItems track by $index">
                                <td><input type="checkbox" ng-model="lineItem.checked"/></td>
                                <td>{{$index+1}}</td>
                                <td>{{lineItem.partno_modelno}}</td> <!-- UOM -->
                                <td>{{lineItem.matDesc}}</td>
                                <td>{{lineItem.oem_description}}</td>
                                <td>{{lineItem.qty}}</td>
                                <td>{{(lineItem.manus.length >1) ? 'Many' : lineItem.manus[0].name }}</td>
                                <td data-ng-if="ProcEdt.supervisor(ProcEdt.quote.quote_id)">{{lineItem.unitofmeasure.name}}</td> <!-- UOM -->
                                <td data-ng-if="ProcEdt.supervisor(ProcEdt.quote.quote_id)"><span data-iz-number="lineItem.unitprice" data-iz-options="{dp:2}"></span></td> <!-- Unit Price -->
                                <td data-ng-if="ProcEdt.supervisor(ProcEdt.quote.quote_id)"><span data-iz-number="lineItem.unitprice*lineItem.qty" data-iz-options="{dp:2}"></span></td> <!-- Extended Price -->
                            </tr>
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div class="form-actions text-center">
                <a ui-sref="app.procurement.list" style="width:10%;" class="btn btn-default" role="button"><i class="fa fa-arrow-left"></i> Cancel</a>
                <button ng-click="ProcEdt.postData()"  data-ng-disabled="form.$invalid || ProcEdt.dataLoading || ProcEdt.isDisabled" style="width:10%;" class="btn btn-primary">Generate PO</button>
                <!--<button ng-click="ProcEdt.postData()" style="width:10%;" class="btn btn-primary">{{ProcEdt.quote.quote_id?'Update':'Submit'}}</button>-->
                <img ng-if="ProcEdt.dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>
            </div>
        </form>
    </div>
</div>