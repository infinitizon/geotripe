<div class="panel">
    <div class="panel-body">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="po_no">Purchase Order Number <span ng-show="!lgstEdt.quote.po_no" class="text-danger">*</span></label>
                        <input type="text" id="po_no" data-ng-model="lgstEdt.quote.po_no" data-ng-blur="lgstEdt.newPoNo()" placeholder="Enter PO number" class="form-control" required="required" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="PartyId">Client <span data-ng-show="!lgstEdt.quote.party_party_id" class="text-danger">*</span></label>
                        <select id="PartyId" class="form-control"
                                data-ng-click="lgstEdt.getLOVs('Party','parties', {'response':'party_id&name', 'and':[{
                                                                                            'propertyName': 'party_partytype_id',
                                                                                            'propertyValue': 201607131,
                                                                                            'propertyDataType': 'BIGINT',
                                                                                            'operatorType': '='
                                                                                        }]})"
                                data-ng-options="party.party_id as party.name for party in lgstEdt.container['parties']"
                                data-ng-model="lgstEdt.quote.party_party_id"
                                data-ng-disabled="lgstEdt.disableClient">
                            <option value="">{{lgstEdt.quote.party_party_id || "--Select Company name --"}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="eventOwner">Name of Event Owner</label>
                        <input type="text" id="eventOwner" data-ng-model="lgstEdt.quote.eventowner" placeholder="--Select Name of Event Owner --" class="form-control" data-ng-disabled="true" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="publishDate">Publish Date <span ng-show="!lgstEdt.quote.publishdate" class="text-danger">*</span></label>
                        <p class="input-group">
                            <input type="text" id="publishDate" class="form-control"
                                   uib-datepicker-popup="dd-MMM-yyyy" ng-model="lgstEdt.quote.publishdate" is-open="lgstEdt.publishdate"
                                   ng-focus="lgstEdt.publishdate=true" placeholder="Publish Date (dd-MMM-YYYY) e.g 08-Aug-2016"
                                   ng-required="true" close-text="&times;" data-ng-disabled="true" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" data-ng-click="lgstEdt.publishdate = !lgstEdt.publishdate"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                        </p>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="dueDate">Due Date <span ng-show="!lgstEdt.quote.duedate" class="text-danger">*</span></label>
                        <p class="input-group">
                            <input type="text" id="dueDate" class="form-control" ng-model="lgstEdt.quote.duedate"
                                   uib-datepicker-popup="dd-MMM-yyyy" is-open="lgstEdt.dueDate" datepicker-options="{minDate: lgstEdt.quote.publishdate}"
                                   data-ng-focus="lgstEdt.dueDate=true" placeholder="Due Date (dd-MMM-YYYY) e.g 08-Aug-2016"
                                   ng-required="true" close-text="&times;" data-ng-disabled="true" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="lgstEdt.dueDate = !lgstEdt.dueDate"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="currency">Currency  <span ng-show="!lgstEdt.quote.quote_currency_id" class="text-danger">*</span></label>
                        <select id="currency" required
                                class="form-control"
                                data-ng-click="lgstEdt.getLOVs('Currency','currencies', {'response':'currency_Id&code'})"
                                data-ng-options="currencies.currency_Id as currencies.code for currencies in lgstEdt.container['currencies']"
                                data-ng-model="lgstEdt.quote.quote_currency_id" data-ng-disabled="true">
                            <option value="">{{lgstEdt.quote.quote_currency_id || "--Select Currency --"}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="userId">Assign to <span data-ng-show="!lgstEdt.quote.users_user_id" class="text-danger">*</span></label>
                        <select id="userId"
                                class="form-control"
                                data-ng-click="lgstEdt.getUsers(20161307)"
                                data-ng-options="user.user_id as user.name for user in lgstEdt.container['users']"
                                data-ng-model="lgstEdt.quote.users_user_id" data-ng-disabled="true">
                            <option value="">{{lgstEdt.quote.users_user_id || "--Select the in-house person to assign to--"}}</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-10 col-sm-offset-1" style="overflow-x: auto;">
                    <fieldset style="margin-top:25px;">
                        <legend>
                            <div class="col-sm-3">
                                <span>Split PO number across selected line items</span>
                                <label class="switch switch-sm pull-right">
                                    <input type="checkbox" data-ng-click="lgstEdt.splitpo_no()" data-ng-model="lgstEdt.split_po">
                                    <span><i class="handle"></i></span>
                                </label>
                            </div>
                        </legend>
                        <br>
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <td><input type="checkbox" ng-change="lgstEdt.updateQuotes()" ng-model="lgstEdt.allQuotes"/></td>
                                <th>S/N</th><th>Part No./Model</th>
                                <th data-ng-if="lgstEdt.splits > 0">New PO numbers</th>
                                <th>Material Description</th><th>OEM Description</th><th>Qty</th><th>Manufacturers</th>
                                <th data-ng-if="lgstEdt.supervisor(lgstEdt.quote.quote_id)">UOM</th>
                                <th data-ng-if="lgstEdt.supervisor(lgstEdt.quote.quote_id)">Unit Price</th>
                                <th data-ng-if="lgstEdt.supervisor(lgstEdt.quote.quote_id)">Extended Price</th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr ng-if="lgstEdt.lineItems.length <= 0"><td colspan="{{lgstEdt.quote.quote_id?9:7}}" style="text-align:center;">{{ lgstEdt.lineItemsLoading || 'Loading new data!!' }}</td></tr>
                                <tr ng-repeat="lineItem in lgstEdt.lineItems track by $index">
                                    <td><input type="checkbox" ng-model="lineItem.checked"/></td>
                                    <td>{{$index+1}}</td>
                                    <td>{{lineItem.partno_modelno}}</td> <!-- UOM -->
                                    <td data-ng-if="lgstEdt.splits > 0">
                                        <a href="#" editable-text="lineItem.po_no" e-placeholder="Enter a new PO no" onbeforesave="lgstEdt.checkName2(lineItem.po_no,$data)">
                                            {{ lineItem.po_no || 'Change No.' }}
                                        </a>
                                    </td> <!-- UOM -->
                                    <td>{{lineItem.matDesc}}</td>
                                    <td>{{lineItem.oem_description}}</td>
                                    <td>{{lineItem.qty}}</td>
                                    <td>{{(lineItem.manus.length >1) ? 'Many' : lineItem.manus[0].name }}</td>
                                    <td data-ng-if="lgstEdt.supervisor(lgstEdt.quote.quote_id)">{{lineItem.unitofmeasure.name}}</td> <!-- UOM -->
                                    <td data-ng-if="lgstEdt.supervisor(lgstEdt.quote.quote_id)"><span data-iz-number="lineItem.unitprice" data-iz-options="{dp:2}"></span></td> <!-- Unit Price -->
                                    <td data-ng-if="lgstEdt.supervisor(lgstEdt.quote.quote_id)"><span data-iz-number="lineItem.unitprice*lineItem.qty" data-iz-options="{dp:2}"></span></td> <!-- Extended Price -->
                                </tr>
                            </tbody>
                        </table>
                        <hr>
                        Please include relevant charges for POs
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th> </th>
                                    <th>PO Number</th>
                                    <th>Currency</th>
                                    <th>Wire Transfer Fee</th>
                                    <th>Cost of Certs</th>
                                    <th>Ground Freight</th>
                                    <th>Int. Freight</th>
                                    <th>Packaging Cost</th>
                                    <th>Harzardous Cost</th>
                                    <th>Other Cost</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="charge in lgstEdt.lstOfcharges">
                                    <td><i class="fa fa-trash text-danger"></i></td>
                                    <td>{{ charge.po_no }}</td>
                                    <td>
                                        <a href="#" editable-select="charge.currency" onshow="lgstEdt.loadCurrency()" e-ng-options="g.currency_Id as g.code for g in lgstEdt.currencies">
                                            <!--{{ lgstEdt.showCurrency(charge.currency) || 'not set' }}-->
                                            {{ charge.currency || 'not set' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.wire_transfer_fee" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.wire_transfer_fee || 'Change No.' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.cost_of_certs" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.cost_of_certs || 'Change No.' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.ground_freight" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.ground_freight || 'Change No.' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.int_freight" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.int_freight || 'Change No.' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.packaging_cost" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.packaging_cost || 'Change No.' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.harzardous_cost" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.harzardous_cost || 'Change No.' }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" editable-number="charge.other_cost" e-step="any" e-placeholder="Enter a new PO no">
                                            {{ charge.other_cost || 'Change No.' }}
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div class="form-actions text-center">
                <a ui-sref="app.procurement.list" style="width:10%;" class="btn btn-default" role="button"><i class="fa fa-arrow-left"></i> Cancel</a>
                <button ng-click="lgstEdt.postData()"  data-ng-disabled="form.$invalid || lgstEdt.dataLoading || lgstEdt.isDisabled" style="width:10%;" class="btn btn-primary">Create PO</button>
                <i ng-if="lgstEdt.dataLoading" class="fa fa-spinner fa-spin fa-2x"></i>
            </div>
    </div>
</div>